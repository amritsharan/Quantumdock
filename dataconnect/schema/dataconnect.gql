# https://firebase.google.com/docs/dataconnect/schema-language
# This is a GraphQL schema that defines the data model for the application.

# Every type that should be stored in the database must be decorated with a `@table` directive.
type User @table(key: "uid") {
  uid: String!
  email: String
  displayName: String
  createdAt: Timestamp
  loginHistory: [LoginHistory] @relation(collection: "loginHistory")
  dockingResults: [DockingResult] @relation(collection: "dockingResults")
}

type LoginHistory @table(key: "loginHistoryId") {
  loginHistoryId: String! @auto
  loginTime: Timestamp
  logoutTime: Timestamp
  status: String
  duration: Int
  dockingSimulations: [DockingSimulation]
    @relation(collection: "dockingSimulations")
}

type DockingSimulation @table(key: "dockingSimulationId") {
  dockingSimulationId: String! @auto
  timestamp: Timestamp
  moleculeSmiles: String!
  proteinTarget: String!
  bindingAffinity: Float!
}

type DockingResult @table(key: "dockingResultId") {
  dockingResultId: String! @auto
  moleculeId: String!
  targetProteinId: String!
  dockingScore: Float!
  refinedEnergy: Float!
  pose: String!
  bindingAffinity: Float!
  createdAt: Timestamp
}

# Queries and Mutations define the operations that can be performed on the data.
type Query {
  # The following queries are automatically generated by the `@table` directive
  # and do not need to be defined here.
  # getUser(uid: String!): User
  # listUsers(limit: Int, offset: Int, orderBy: [UserOrderBy]): [User]
}

type Mutation {
  # The following mutations are automatically generated by the `@table` directive
  # and do not need to be defined here.
  # createUser(input: UserInput!): User
  # updateUser(uid: String!, input: UserInput!): User
  # deleteUser(uid: String!): User

  # We can also define custom mutations that are not tied to a specific table.
  createLoginHistory(status: String!): LoginHistory!
  updateLoginHistory(loginHistoryId: String!, status: String!): LoginHistory
  createDockingSimulation(
    loginHistoryId: String!
    moleculeSmiles: String!
    proteinTarget: String!
    bindingAffinity: Float!
  ): DockingSimulation!
  createDockingResult(
    moleculeId: String!
    targetProteinId: String!
    dockingScore: Float!
    refinedEnergy: Float!
    pose: String!
    bindingAffinity: Float!
  ): DockingResult!
}
